<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.mappers.employeeMapper">
	<select id="userCheck" resultType="com.itwillbs.domain.EmployeeDTO">
        select * from employee
        where emp_num = #{emp_num} and emp_pass = #{emp_pass}
    </select>
    
    <select id="getEmployeeListMap" resultType="map">
    	select emp_num, emp_Kname, dept_position, dept_duty, department.dept_deptName, 
		DATE_FORMAT(emp_joinDate, '%Y-%m-%d')as emp_joinDate, 
	    concat(substring(concat('0',emp_tel) from 1 for 3),'-',substring(concat('0',emp_tel) from 4 for 3),'-',substring(concat('0',emp_tel) from 7 for 4)) as emp_tel, 
	    emp_email
		from employee join department
		on dept_num = dept_deptNum
		where 
			<if test="search_option == 'emp_Kname'.toString()">
				emp_Kname like CONCAT('%', #{keyword}, '%')
			</if>
			
			<if test="search_option == 'emp_num'.toString()">
				emp_num like CONCAT('%', #{keyword}, '%')
			</if>
			
			<if test="search_option == 'emp_tel'.toString()">
				emp_tel like CONCAT('%', #{keyword}, '%')
			</if>
			
			<if test="search_option == 'emp_phone'.toString()">
				emp_phone like CONCAT('%', #{keyword}, '%')
			</if>
			
			<if test="search_option == 'dept_num'.toString()">
				department.dept_deptName like CONCAT('%', #{keyword}, '%')
			</if>
			
		
		order by emp_joinDate desc
    </select>
    
</mapper>